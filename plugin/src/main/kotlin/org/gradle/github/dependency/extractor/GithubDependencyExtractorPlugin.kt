/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package org.gradle.github.dependency.extractor

import org.gradle.api.Plugin
import org.gradle.api.internal.GradleInternal
import org.gradle.api.invocation.Gradle
import org.gradle.github.dependency.extractor.internal.DependencyExtractorService
import org.gradle.internal.build.event.BuildEventListenerRegistryInternal

/**
 * A simple 'hello world' plugin.
 */
class GithubDependencyExtractorPlugin : Plugin<Gradle> {
    override fun apply(gradle: Gradle) {
        val extractorPluginProvider = gradle.sharedServices.registerIfAbsent(
            "dependencyExtractorService",
            DependencyExtractorService::class.java,
            {}
        )
        (gradle as GradleInternal)
            .services
            .get(BuildEventListenerRegistryInternal::class.java)
            .onOperationCompletion(extractorPluginProvider)

    }
}
